{
    "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
    "version": "0.1.0",
    "name": "milone",
    "scopeName": "source.milone",
    "patterns": [
        {
            "comment": "Single-line documentation comment",
            "name": "comment.line.documentation.milone",
            "begin": "///",
            "end": "$"
        },
        {
            "comment": "Single-line non-documentation comment",
            "name": "comment.line.double-slash.milone",
            "begin": "//",
            "end": "$"
        },
        {
            "comment": "Hexadecimal literal",
            "name": "constant.numeric.hexadecimal.milone",
            "match": "\\b0x[_0-9A-Za-z]*\\b"
        },
        {
            "comment": "Decimal literal",
            "name": "constant.numeric.float.milone",
            "match": "\\b-?[0-9][_0-9]*(\\.[_0-9]*)?([eE][-+]?[_0-9]*)?[_0-9A-Za-z]*\\b"
        },
        {
            "comment": "Char literal",
            "name": "string.quoted.single.milone",
            "match": "'([^'\\\\]|\\\\(?:x[0-9A-Fa-f]{2}|.))'",
            "captures": {
                "1": {
                    "patterns": [
                        {
                            "include": "#escape_sequence"
                        }
                    ]
                }
            }
        },
        {
            "comment": "Type variable",
            "name": "entity.name.type.variable.milone",
            "match": "'[A-Za-z]\\b"
        },
        {
            "comment": "Multi-line string literal",
            "name": "string.quoted.triple.milone",
            "begin": "\"\"\"",
            "end": "\"\"\"",
            "patterns": []
        },
        {
            "comment": "Illegal prefix of char/string literal",
            "name": "invalid.illegal.milone",
            "match": "\\b[A-Za-z_][0-9A-Za-z_]*(?=['\"])"
        },
        {
            "comment": "Single-line string literal",
            "name": "string.quoted.double.milone",
            "begin": "\"",
            "end": "\"",
            "patterns": [
                {
                    "include": "#escape_sequence"
                }
            ]
        },
        {
            "comment": "Attributes",
            "name": "meta.embedded.milone",
            "begin": "^\\[<",
            "end": ">\\]"
        },
        {
            "comment": "Boolean literals",
            "name": "constant.language.boolean.milone",
            "match": "\\b(false|true)\\b"
        },
        {
            "name": "invalid.illegal.milone",
            "match": "\\b(do|let|match|return|yield)!"
        },
        {
            "comment": "Unsupported keywords",
            "name": "invalid.illegal.milone",
            "match": "\\b(abstract|and|async|base|become|begin|break|checked|class|component|const|constraint|continue|default|delegate|done|downcast|downto|do|elif|end|event|exception|extern|external|finally|fixed|for|function|global|include|inherit|inline|interface|internal|lazy|member|mixin|mutable|mut|namespace|new|null|or|override|parallel|process|protected|pure|ref|return|sealed|select|seq|signature|sig|static|struct|tailcall|to|trait|try|upcast|use|val|virtual|void|while|yield)\\b"
        },
        {
            "comment": "Control keywords",
            "name": "keyword.control.milone",
            "match": "\\b(else|if|match|then|when|with)\\b"
        },
        {
            "comment": "Visibility keywords",
            "name": "storage.modifier.visibility.milone",
            "match": "\\b(private|public)\\b"
        },
        {
            "comment": "Other keywords",
            "name": "keyword.milone",
            "match": "\\b(as|fun|in|let|module|of|open|rec|type)\\b"
        },
        {
            "comment": "Built-in types",
            "name": "entity.name.type.milone",
            "match": "\\b(bool|s?byte|char|float(32)?|list|nativeptr|obj|string|u?int(8|16|32|64)?|u?nativeint|unit|voidptr|__inptr|__nativeType|__outptr|__voidinptr)\\b"
        },
        {
            "comment": "Built-in functions",
            "name": "entity.name.function.milone",
            "match": "\\b(assert|box|compare|exit|not|printfn|sizeof|unbox|__[0-9A-Za-z]*)\\b"
        },
        {
            "comment": "Built-in values",
            "name": "constant.language.milone",
            "match": "\\b(Error|None|Ok|Some)\\b"
        },
        {
            "comment": "Unsupported brackets and sigils",
            "name": "invalid.illegal.milone",
            "match": "\\(\\||\\|\\)|\\[\\||\\|\\]|\\[:|:\\]|\\{\\||\\|\\}|\\(\\*|\\*\\)|\\\\|#|`|\\$"
        },
        {
            "comment": "Arithmetic operators",
            "name": "keyword.operator.arithmetic.milone",
            "match": "(\\+|-|\\*|/|%|&&&|\\|\\|\\||\\^\\^\\^|<<<|>>>)(?![-;:!?\\.@*\\/&%^+<=>|~])"
        },
        {
            "comment": "Logical operators (this rule must be after arithmetic operators to avoid conflict)",
            "name": "keyword.operator.logical.milone",
            "match": "(&&|\\|\\|)(?![-;:!?\\.@*\\/&%^+<=>|~])"
        },
        {
            "comment": "Other oerators",
            "name": "keyword.operator.other.milone",
            "match": "(\\|>|\\.\\.?|::?|->|&|\\||,|;)(?![-;:!?\\.@*\\/&%^+<=>|~])"
        },
        {
            "comment": "Comparison operators (this rule must be after arithmetic operators and pipeline operator to avoid conflict)",
            "name": "keyword.operator.comparison.milone",
            "match": "(=|<>|<|<=|>|>=)(?![-;:!?\\.@*\\/&%^+<=>|~])"
        },
        {
            "comment": "Unsupported sigils",
            "name": "invalid.illegal.milone",
            "match": "[-;:!?\\.@*\\/&%^+<=>|~]+"
        },
        {
            "comment": "Brackets",
            "name": "keyword.other.brackets.milone",
            "match": "\\(|\\)|\\[|\\]|\\{|\\}"
        },
        {
            "comment": "Potential namespaces guess (front of dot)",
            "match": "\\b([A-Z]\\w+)(?=\\.(?!\\.|\\[))",
            "captures": {
                "1": {
                    "name": "entity.name.class.milone"
                }
            }
        },
        {
            "comment": "Wildcard or discard",
            "name": "variable.other.wildcard.milone",
            "match": "\\b_[0-9A-Za-z_]*\\b"
        }
    ],
    "repository": {
        "escape_sequence": {
            "comment": "Escape sequences",
            "name": "constant.character.escape.milone",
            "match": "\\\\(x[0-9A-Fa-f]{2}|.)"
        }
    }
}
