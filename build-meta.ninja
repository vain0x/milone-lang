# ninja task to generate build.ninja.

# USAGE: bin/ninja -f build-meta.ninja

builddir = target

gen_ninja_file = scripts/GenNinjaFile/bin/Release/net5.0/GenNinjaFile

# ------------------------------------------------
# GenNinjaFile
# ------------------------------------------------

rule build_generator
    command = dotnet build -c Release scripts/GenNinjaFile

build $gen_ninja_file: $
    build_generator $
        scripts/GenNinjaFile/Program.fs $
        scripts/GenNinjaFile/TemplateTestCase.fs $
        scripts/GenNinjaFile/GenNinjaFile.fsproj

rule generate
    command = scripts/build-ninja-gen

# ------------------------------------------------
# build.ninja
# ------------------------------------------------

build build.ninja: generate $gen_ninja_file build-template.ninja

default build.ninja
