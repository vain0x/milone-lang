module rec LibNursery.Runtime

let memAlloc (len: int) (size: unativeint) : voidptr =
  __nativeFun ("milone_mem_alloc", len, size)

/// Prints a message to stderr and returns false.
///
/// Meant to be used like this:
///   `assert (pred || violate "reason")`
let violate (msg: string) : bool =
  __nativeStmt ("""fprintf(stderr, "error: %s\n", str_to_c_str({0}));""", msg)
  false
